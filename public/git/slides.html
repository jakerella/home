<section>
    <section>
        <h2>Gitting More Out of Git</h2>
        <p style='margin-top: 3em'>Jordan Kasper</p>
        <p class='fine'>
            <a href='http://twitter.com/jakerella'>@jakerella</a>
        </p>
    </section>

    @include company

    @include me
</section>

<section data-background='#fff'>
    <h3>
        <img src='images/robot.png' alt='Danger!'><br>
        Danger!
    </h3>
</section>


<section>

    <section>
        <h3>Git is Distributed</h3>
    </section>

    <section data-background='#fff'>
        <h4>A centralized VCS</h4>

        <img src='images/CentralizedVCS.png' alt='centralized vcs'>

        <cite>https://docs.joomla.org/Dvcs</cite>
    </section>

    <section data-background='#fff'>
        <h4>A distributued VCS</h4>

        <img src='images/DistributedVCS_Complex.png' alt='dsitributed vcs (complex)'>

        <cite>https://docs.joomla.org/Dvcs</cite>
    </section>

    <section data-background='#fff'>
        <h4>A distributued VCS <span class='fine'>(in practice)</span></h4>

        <img src='images/DistributedVCS.png' alt='dsitributed vcs'>

        <cite>https://docs.joomla.org/Dvcs</cite>
    </section>

    <section>
        <h3>Remotes</h3>

        <p class='fragment'>Just like it sounds, a "remote" is a repo outside your environment.</p>
    </section>

    <section>
        <h4>Cloning</h4>

        <pre><code class='no-highlight'>~$ git clone http://some.repo.com someDirectory</code></pre>

        <div class='fragment'>
            <pre><code class='no-highlight' data-trim>
~$ git branch -a
* master
  remotes/origin/master
            </code></pre>

            <p>Cloning creates a remote called "origin"</p>
        </div>
    </section>

    <section>
        <h4>Tracking</h4>

        <p>A local branch may "track" a remote URL...</p>

        <pre><code class='no-highlight' data-trim>
~$ git branch -vv
* master             b956c45 [origin/master] Initial commit
  some-local-branch  a74b295 Implemented that cool feature
        </code></pre>
    </section>

    <section>
        <h4>Wherezitat?</h4>

        <pre><code class='no-highlight' data-trim>
~$ git remote -v
origin  https://github.com/jakerella/repo-name.git (fetch)
origin  https://github.com/jakerella/repo-name.git (push)
        </code></pre>
    </section>

    <section>
        <h4>Tracking</h4>

        <p>
            How do I make a new branch "track" that remote repo?
        </p>

        <div class='fragment'>
            <pre><code class='no-highlight' data-trim>
~$ git checkout -b new-feature
~$ git branch --set-upstream-to=origin/new-feature
            </code></pre>

            <pre class='fragment'><code class='no-highlight' data-trim>
~$ git branch -u origin/new-feature
            </code></pre>

            <pre class='fragment'><code class='no-highlight' data-trim>
~$ git push -u origin new-feature
            </code></pre>

            <pre class='fragment'><code class='no-highlight' data-trim>
~$ git branch -vv
  master            b956c45 [origin/master] Initial commit
* new-feature       b956c45 [origin/new-feature] Initial commit
  some-local-branch a74b295 Implemented that cool feature
            </code></pre>
        </div>
    </section>

    <section>
        <h4>Other remotes</h4>
        <p>
            What about other repos? How is this distributed?
        </p>

        <pre class='fragment'><code class='no-highlight' data-trim>
~$ git remote add jquery-source https://github.com/jquery/jquery.git
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim>
~$ git remote -v
origin         https://github.com/jakerella/jquery.git (fetch)
origin         https://github.com/jakerella/jquery.git (push)
jquery-source  https://github.com/jquery/jquery.git (fetch)
jquery-source  https://github.com/jquery/jquery.git (push)
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim>
~$ git fetch jquery-source
...
~$ git merge jquery-source/master
        </code></pre>
    </section>

</section>


<section>

    <section>
        <h2>Branch Differences</h2>
    </section>

    <section>
        <h4>Branch Differences</h4>

        <pre><code class='no-highlight' data-trim>
~$ git diff master stuff
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
diff --git a/README.md b/README.md
index a1e4bac..e69de29 100644
<strong>--- a/README.md
+++ b/README.md</strong>
@@ -1 +0,0 @@
-This is the readme
diff --git a/STUFF.md b/STUFF.md
<strong>new file mode 100644</strong>
index 0000000..e69de29
        </code></pre>
    </section>

    <section>
        <h4>Branch Differences</h4>

        <pre><code class='no-highlight' data-trim>
~$ git diff master stuff
        </code></pre>

        <p>
            This is ALL changes between <code>master</code> and <code>stuff</code>
        </p>
        <p>
            (regardless of what branch those came from).
        </p>
    </section>

    <section>
        <h4>Single-Branch Differences</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git diff <strong>master...stuff</strong>
diff --git a/STUFF.md b/STUFF.md
new file mode 100644
index 0000000..e69de29
        </code></pre>
    </section>

    <section>
        <h4>Single-Branch Differences</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git diff <strong>b9bdb02 b86e65d</strong>
diff --git a/STUFF.md b/STUFF.md
new file mode 100644
index 0000000..e69de29
        </code></pre>
    </section>

</section>


<section class='cut-me-1'>

    <section>
        <h3>Git and Data Integrity</h3>

        <div class='fragment'>
            <p class='illuminate'>Git uses snapshots</p>
            <p class='fine'>(versus file diffs)</p>
        </div>
    </section>

    <section>
        <h4>File Diffs</h4>

        <img src='images/file-diffs.png' alt='file diff diagram'>

        <cite>http://git-scm.com/book/en/Getting-Started-Git-Basics</cite>
    </section>

    <section>
        <h4>Snapshots</h4>

        <img src='images/snapshots.png' alt='snapshots diagram'>

        <cite>http://git-scm.com/book/en/Getting-Started-Git-Basics</cite>
    </section>

    <section>
        <h4>Commit Hashes</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git commit -m "Added documentation"
[master (root-commit) <strong>b9bdb02</strong>] Added documentation
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git log
commit <strong>b9bdb0261ee9bcaa31d7eb062c0bcafee3e530f0</strong>
Author: jdoe &lt;john@doe.com&gt;
Date:   Fri Jul 11 17:27:14 2014 -0500

Added documentation
        </code></pre>
    </section>

</section>


<section>

    <section>
        <h3>When things go wrong...</h3>
    </section>

    <section data-transition='none'>
        <h4>Fixing commit messages</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git commit -m "This is <strong>teh</strong> best."
[feature-branch fd0091e] This is teh best.
1 file changed, 1 insertion(+)
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git commit <strong>--amend</strong> -m "This is <strong>the</strong> best."
[feature-branch 0486a7d] This is the best.
1 file changed, 1 insertion(+)
        </code></pre>
    </section>

    <section data-transition='none'>
        <h4>Fixing commit messages</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git commit -m "This is teh best."
[feature-branch <strong>fd0091e</strong>] This is teh best.
1 file changed, 1 insertion(+)
        </code></pre>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git commit --amend -m "This is the best."
[feature-branch <strong>0486a7d</strong>] This is the best.
1 file changed, 1 insertion(+)
        </code></pre>
    </section>

    <section>
        <h4>What about the log?</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git log
commit <strong>0486a7d61ee9bcaa31d7eb062c0bcafee3e530f0</strong>
Author: jdoe &lt;john@doe.com&gt;
Date:   Fri Jul 11 17:27:14 2014 -0500

This is the best.

commit 72267fc26d88fa977d24760252da63b46ca3b81a
Author: fbar &lt;foo@bar.com&gt;
Date:   Fri Jul 10 14:31:36 2014 -0500

I did a thing!
        </code></pre>
    </section>

    <section>
        <h4>Never really gone...</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reflog
<strong>0486a7d</strong> HEAD@{0}: commit (amend): This is the best.
<strong>fd0091e</strong> HEAD@{1}: commit: This is teh best.
72267fc HEAD@{2}: commit: I did a thing!
...
        </code></pre>
    </section>

    <section>
        <h4>What if I forgot a file?</h4>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git add forgotten.js
~$ git commit --amend
        </code></pre>
    </section>

    <section>
        <h4>And what if I need to modify an older commit?</h4>

        <p class='fragment illuminate'>You'll need to use <code>git rebase --interactive</code></p>
    </section>

    <section class='cut-me-1'>
        <h4>Interactive Rebasing</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git rebase --interactive HEAD^^^
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
pick 8d29c5c Some older work
pick 72267fc I did a thing!
pick fd0091e This is the best.

# Rebase 5a39902..fd0091e onto 5a39902 (3 command(s))
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  <strong>e, edit = use commit, but stop for amending</strong>
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
...
        </code></pre>
    </section>

    <section class='cut-me-2'>
        <h4>Interactive Rebasing</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git rebase --interactive HEAD^^^
        </code></pre>

        <pre><code class='no-highlight' data-trim data-noescape>
<strong>edit</strong> 72267fc I did a thing!
pick fd0091e This is the best.

# Rebase 7e10e41..fd0091e onto 7e10e41
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
...
        </code></pre>
    </section>

    <section class='cut-me-2'>
        <pre><code class='no-highlight' data-trim data-noescape>
~$ git rebase --interactive HEAD^^^
<strong>Stopped at 72267fc26d88fa977d24760252da63b46ca3b81a... I did a thing!</strong>
...
        </code></pre>

        <div class='fragment'>
            <p class='illuminate'>Now alter the commit just like before...</p>

            <pre><code class='no-highlight' data-trim data-noescape>
~$ git add forgotten-file.js
~$ git commit --amend
...
~$ git rebase --continue
Successfully rebased and updated refs/heads/new-feature.
            </code></pre>
        </div>
    </section>

    <section class='cut-me-2'>
        <p class='illuminate'>Careful! You've just changed<br><strong>ALL history</strong> from that point forward.</p>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reflog

5e83670 HEAD@{0}: rebase -i (finish): returning to refs/heads/new-feature
<strong>5e83670</strong> HEAD@{1}: rebase -i (pick): This is the best
<strong>bcb51f9</strong> HEAD@{2}: commit (amend): I did a thing!
72267fc HEAD@{3}: cherry-pick: fast-forward
<strong>7e10e41</strong> HEAD@{4}: rebase -i (start): checkout HEAD^^^
fd0091e HEAD@{9}: commit: This is the best
72267fc HEAD@{10}: commit: I did a thing!
7e10e41 HEAD@{11}: commit: some old commit
        </code></pre>
    </section>

    <section>
        <h3>Undoing Changes</h3>
    </section>

    <section>
        <h4>Unstaged Changes</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ echo "foobar" &gt;&gt; README.md
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
# On branch new-feature
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   <strong>(use "git checkout -- &lt;file&gt;..." to discard changes in working directory)</strong>
#
#    modified:   README.md
        </code></pre>
    </section>

    <section>
        <h4>Unstaged Changes</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout README.md

~$ git status
# On branch new-feature
nothing to commit (working directory clean)
        </code></pre>

        <div  class='fragment'>
            <p class='fine'>You can also `checkout` entire directories:</p>
            <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout src/js/
            </code></pre>
        </div>
    </section>

    <section>
        <h4>Unstaged Changes</h4>

        <p class='illuminate'>
            Be careful! <strong>NEW</strong> files will not be removed!
        </p>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout src/js/
~$ git status
On branch master

Untracked files:
  (use "git add &lt;file>..." to include in what will be committed)

       	src/js/foobar.js
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ rm src/js/foobar.js
        </code></pre>
    </section>

    <section data-transition='none'>
        <h4>Staged Changes</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ echo "foobar" &gt;&gt; README.md
~$ git add README.md
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
# On branch new-feature
# Changes to be committed:
#   <strong>(use "git reset HEAD &lt;file&gt;..." to unstage)</strong>
#
#   modified:   README.md
        </code></pre>
    </section>

    <section>
        <h4>Staged Changes</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reset HEAD README.md
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
# On branch new-feature
# Changes not staged for commit:
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   README.md
        </code></pre>
    </section>

    <section>
        <h3><code>HEAD</code> is just a reference to the commit<br>at the end of the current branch!</h3>
    </section>

    <section>
        <h3>So what is "staging" and "working directory"?</h3>
    </section>

    <section data-background='#fff'>
        <h4>Remember the Three States!</h4>

        <img src='images/git_checkout-commit.png' alt='checkout and push workflow diagram' style='width:60%;'>
    </section>

    <section>
        <h3>Undoing Committed Changes</h3>
        <p style='margin-top:3em' class='fine'>(a.k.a. Oops)</p>
    </section>

    <section>
        <h4>Bad Commit</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ echo "foobar" >> README.md

~$ git add README.md
~$ git commit -m "this is not a good change"
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git log
commit d42c38661ee9bcaa31d7eb062c0bcafee3e530f0
Author: jdoe &lt;john@doe.com&gt;
Date:   Fri Jul 11 17:27:14 2014 -0500

this is not a good change
        </code></pre>
    </section>

    <section>
      <h2>Using <code>reset</code></h2>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Understanding the Three Seashells</h4>

        <img src='images/git_reset-1.png' alt='three states of a git repo' style='width:70%;'>

        <p>&nbsp;</p>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Understanding the Three Seashells</h4>

        <img src='images/git_reset-2.png' alt='soft reset diagram' style='width:70%;'>

        <p><code>git reset --soft HEAD^</code></p>
    </section>

    <section>
        <h4>Soft Reset</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reset --soft HEAD^

~$ git log
commit b86e65dab535623d487e063ef1337cfdecfaf99d
Author: jdoe &lt;john@doe.com&gt;
Date:   Fri Jul 10 12:45:11 2014 -0500

the immediately previous change (totally normal)
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
# On branch new-feature
# <strong>Changes to be committed:</strong>
#   (use "git reset HEAD &lt;file&gt;..." to unstage)
#
#    modified:   README.md
        </code></pre>
    </section>

    <section data-background='#fff'>
        <img src='images/git_reset-3.png' alt='mixed reset diagram' style='width:70%;'>

        <p><code>git reset --mixed HEAD^</code></p>
    </section>

    <section>
        <h4>Mixed Reset</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reset --mixed HEAD^

~$ git log
commit b86e65dab535623d487e063ef1337cfdecfaf99d
Author: jdoe &lt;john@doe.com&gt;
Date:   Fri Jul 10 12:45:11 2014 -0500

the immediately previous change (totally normal)
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
# On branch new-feature
# <strong>Changes not staged for commit:</strong>
#   (use "git add &lt;file&gt;..." to update what will be committed)
#   (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)
#
#   modified:   README.md
        </code></pre>
    </section>

    <section data-background='#fff'>
        <img src='images/git_reset-4.png' alt='hard reset diagram' style='width:70%;'>

        <p><code>git reset --hard HEAD^</code></p>
    </section>

    <section>
        <h4>Hard Reset</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reset --hard HEAD^

~$ git log
commit b86e65dab535623d487e063ef1337cfdecfaf99d
Author: jdoe &lt;john@doe.com&gt;
Date:   Fri Jul 10 12:45:11 2014 -0500

the immediately previous change (totally normal)

~$ git status
# On branch new-feature
nothing to commit (working directory clean)
        </code></pre>
    </section>

    <section>
        <h3>Oh no!</h3>
        <p>I reset --hard and lost some work...</p>
    </section>

    <section>
        <h4>Understanding the reflog</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reflog

<strong>b86e65d HEAD@{0}: reset: moving to HEAD^</strong>
d42c386 HEAD@{1}: commit: this is not a good change
<strong>b86e65d</strong> HEAD@{2}: commit: the immediately previous change (totally normal)
e098369 HEAD@{3}: checkout: moving from master to new-feature
b9bdb02 HEAD@{4}: commit: a really good change
e098369 HEAD@{5}: pull: Fast-forward
        </code></pre>
    </section>

    <section>
        <h4>Understanding the reflog</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git reset --hard HEAD@{1}
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git reflog

<strong>d42c386</strong> HEAD@{0}: reset: moving to HEAD@{1}
b86e65d HEAD@{1}: reset: moving to HEAD^
<strong>d42c386</strong> HEAD@{2}: commit: this is not a good change
b86e65d HEAD@{3}: commit: the immediately previous change (totally normal)
e098369 HEAD@{4}: checkout: moving from master to new-feature
b9bdb02 HEAD@{5}: commit: a really good change
e098369 HEAD@{6}: pull: Fast-forward
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git log --oneline
<strong>d42c386</strong> this is not a good change
<strong>b86e65d</strong> the immediately previous change (totally normal)
<strong>b9bdb02</strong> a really good change
        </code></pre>
    </section>

    <section>
        <h4>HEAD notation</h4>

        <ul>
            <li><code>HEAD^</code> (back one place from current HEAD)</li>
            <li><code>HEAD^^</code> (back two places from current HEAD)</li>
            <li><code>HEAD~n</code> (back 'n' places from current HEAD)</li>
            <li><code>HEAD@{i}</code> (back to reflog index 'i')</li>
        </ul>
    </section>

</section>


<section>

    <section>
        <h3 style='text-transform:none; margin-top:1em;'>My boss just told me to pivot...</h3>

        <p style='margin-top:1em;'>Using <code>git stash</code></p>

        <img src='images/stache.png' alt='A "stache"... not the same thing' style='width:50%;'>
    </section>

    <section>
        <h4>The Situation</h4>

        <p>You've made some changes on a feature branch, but they are not ready to commit yet...</p>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git checkout -b hot-fix-123
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
On branch hot-fix-123
Changes not staged for commit:
    ...
    <strong>modified:   borked-code.js</strong>
    <strong>modified:   some-unrelated-file.js</strong>

Untracked files:
    ...
    <strong>new-code.js</strong>
        </code></pre>
    </section>

    <section>
        <h4>Using the Stash</h4>

        <div class='fragment'>
            <pre><code class='no-highlight' data-trim data-noescape>
~$ git stash --include-untracked
Saved working directory and index state WIP on new-feature: 3c927dd Added text to readme
HEAD is now at 3c927dd Added text to readme
            </code></pre>

            <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
# On branch new-feature
nothing to commit (working directory clean)
            </code></pre>

        </div>
    </section>

    <section>
        <h4>Managing Your Stash</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git stash list
stash@{0}: WIP on new-feature: 3c927dd Added text to readme
        </code></pre>

        <p class='fragment illuminate'>But what if you <code>stash</code> multiple times?!</p>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git stash list
stash@{0}: WIP on new-feature: 3c927dd Added text to readme
stash@{1}: WIP on new-feature: 3c927dd Added text to readme
stash@{2}: WIP on new-feature: 3c927dd Added text to readme
stash@{3}: WIP on hot-fix-456: a46c33b Replaced old lib with new one
        </code></pre>
    </section>

    <section>
        <h4>Naming Your Stash</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git stash save 'work on the API for new feature'

~$ git stash list
stash@{0}: On new-feature: work on the API for new feature
stash@{1}: On new-feature: trying out some async behavior
stash@{2}: On hot-fix-456: attempt to fix bug #456, but incomplete
        </code></pre>
    </section>

    <section>
        <h3>Great, but how do I use it?</h3>
    </section>

    <section>
        <h4>Applying Your Stash</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git stash apply
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
On branch new-feature
Changes not staged for commit:
    ...
    <strong>modified:   borked-code.js</strong>
    <strong>modified:   some-unrelated-file.js</strong>

Untracked files:
    ...
    <strong>new-code.js</strong>
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git stash list
stash@{0}: On new-feature: work on the API for new feature
stash@{1}: On new-feature: trying out some async behavior
stash@{2}: On hot-fix-456: attempt to fix bug #456, but incomplete
        </code></pre>
    </section>

    <section>
        <h4>Dropping Your Stash</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git stash <strong>drop stash@{0}</strong>
Dropped refs/stash@{0} (a52d9c3ba1121dd94eb3925ba60d3f8ef30540c8)
        </code></pre>

        <p class='illuminate'>Make sure you know which stash you're dropping!</p>
    </section>

    <section>
        <h4>Popping Your Stash</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git stash <strong>pop</strong>
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
On branch new-feature
Changes not staged for commit:
    ...
    modified:   borked-code.js
    modified:   some-unrelated-file.js

Untracked files:
    ...
    new-code.js

<strong>Dropped refs/stash@{0} (a52d9c3ba1121dd94eb3925ba60d3f8ef30540c8)</strong>
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git stash list
stash@{0}: On new-feature: trying out some async behavior
stash@{1}: On hot-fix-456: attempt to fix bug #456, but incomplete
        </code></pre>
    </section>

</section>


<section>

    <section data-background='#fff' style='height:15em'>
        <h3 style='margin-top:4em;'>Logs</h3>

        <img src='images/log.png' alt='Log (from Ren &amp; Stimpy)' style='position:absolute; bottom:-1em; left:0;'>

        <cite>http://thedailyomnivore.net/2012/02/20/ren-stimpy/</cite>
    </section>

    <section>
        <h4>The Basic Log</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git log
commit d42c38691161f42fcc07d806f7df4579e8cd189e
Author: jakerella &lt;jordan@jordankasper.com&gt;
Date:   Sat Jul 5 15:57:36 2014 -0500

Added text to readme

commit b9bdb0261ee9bcaa31d7eb062c0bcafee3e530f0
Author: jakerella &lt;jordan@jordankasper.com&gt;
Date:   Sat Jul 5 15:36:30 2014 -0500

Added documentation
...
        </code></pre>
    </section>

    <section>
        <h4>Log Options</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git log <strong>--oneline</strong>

d42c386 Added text to readme
b9bdb02 Added documentation
c2cb87e removed unused files from test harness
2e8a119 Merge pull request #186 from jakerella/feature-async-response
79eec03 Reorganized 'Documentation' section and renamed
...
        </code></pre>
    </section>

    <section>
        <h4>Log Graphs</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git log --oneline <strong>--graph</strong>

*   714e0dd Merge pull request #220 from appendto/feature-two
|\
| * c8bcfc1 last update for feature two
| *   3e3a8fd Merge branch 'feature-two-tweak' into feature-two
| |\
| | * 46f4cf1 tweak for feature two
| * | 1471f2b one more thing on feature two
| |/
| * 5ce150b feature two initial work
|/
* 062b1f0 some previous work
        </code></pre>
    </section>

    <section>
        <h4>Filtering the Log</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git log <strong>--no-merges</strong>

~$ git log <strong>--author="jakerella"</strong>

~$ git log <strong>--before="2014-07-01"</strong>

~$ git log <strong>-- src/js/</strong>

~$ git log <strong>-S foobar</strong>
        </code></pre>
    </section>

</section>


<section class='cut-me-1'>

    <section>
        <h3>Pointing Blame</h3>

        <p class='fragment fine illuminate'>(Many times at yourself...)</p>
    </section>

    <section>
        <h4>Blame Game</h4>

        <pre><code class='lang-javascript' data-trim data-noescape>
/* utility functions */

function sum(x, y) {
    return x * y;
}
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ <strong>git blame src/js/utilities.js</strong>
<span style='letter-spacing:0.06em;'>d35241e6 (Ryan      2014-03-13   1) /* utility functions */
d35241e6 (Ryan      2014-03-13   2)
d35241e6 (Ryan      2014-03-13   3) function sum(x, y) {</span>
<strong>27cc7225   (Jordan      2014-03-15     4)      return x * y;</strong>
<span style='letter-spacing:0.06em;'>d35241e6 (Ryan      2014-03-13   5) }</span>
        </code></pre>
    </section>

    <section>
        <h4>Blame Game</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git <strong>L3,5</strong> blame src/js/utilities.js
d35241e6 (Ryan      2014-03-13   3) function sum(x, y) {
27cc7225 (Jordan    2014-03-15   4)     return x * y;
d35241e6 (Ryan      2014-03-13   5) }
        </code></pre>
    </section>

</section>


<section class='cut-me-1'>

    <section>
        <h4>Dissecting the Log</h4>

        <h4 class='fragment'>Using <code>git bisect</code></h4>
    </section>

    <section data-transition='none'>
        <h4>Using Bisect</h4>

        <p>First, switch to a broken branch...</p>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git bisect start
        </code></pre>
        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git bisect bad
        </code></pre>
        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git bisect good b9bdb02
Bisecting: 3 revisions left to test after this (roughly 2 steps)
[7e3f9393a716b1bf5c935031bae679249352726d] implemented some cool new thing
        </code></pre>
        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git status
# Not currently on any branch.
nothing to commit (working directory clean)
        </code></pre>
    </section>

    <section data-transition='none'>
        <h4>Using Bisect</h4>

        <p>Test the current commit...</p>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git bisect good b9bdb02
Bisecting: 3 revisions left to test after this (roughly 2 steps)
[7e3f9393a716b1bf5c935031bae679249352726d] implemented some cool new thing
        </code></pre>
        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
<strong>~$ grunt test</strong>
        </code></pre>
        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git bisect <strong>[good|bad]</strong>
Bisecting: 1 revision left to test after this (roughly 1 step)
[b86e65d056ea750f1f882df7c10dc5e1bf2deeb2] risky change that may break things
        </code></pre>
    </section>

    <section>
        <h4>Using Bisect</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git bisect start
~$ git bisect bad
~$ git bisect good b9bdb02
Bisecting: 3 revisions left to test after this (roughly 2 steps)
[7e3f9393a716b1bf5c935031bae679249352726d] implemented some cool new thing

...

        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git bisect good
<strong>7e3f9393a716b1bf5c935031bae679249352726d is the first bad commit</strong>
commit 7e3f9393a716b1bf5c935031bae679249352726d
Author: jakerella
        </code></pre>
    </section>

    <section>
        <h4>Now You Know...</h4>

        <p class='illuminate'>Remember, we're no longer on a branch!</p>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git bisect <strong>reset</strong>
Previous HEAD position was b86e65d... Added some stuff
Switched to branch 'new-feature'
        </code></pre>
    </section>

</section>


<section>

    <section>
        <h3>Playing Nice With Others</h3>

        <p>
            <code>merge</code>,
            <code>rebase</code>, and
            <code>cherry-pick</code>
        </p>
    </section>

    <section data-background='#fff'>
        <h4>Merging</h4>

        <p>With no divergent changes...</p>

        <img src='images/git_merge-1.png' alt='git pre-merge diagram with one commit' style='width:60%;'>
    </section>

    <section data-background='#fff'>
        <h4>Fast Forward</h4>

        <p>With no divergent changes... we can "fast forward"</p>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout master
~$ git merge feature
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
Updating b86e65d..d42c386
<strong>Fast forward</strong>
src/js/some-file.js |   13 ++++--+++
1 files changed, 7 insertions(+), 2 deletions(-)
        </code></pre>

        <img class='fragment' src='images/git_merge_ff.png' alt='git merge diagram, fast-forward' style='width:60%;'>
    </section>

    <section>
        <h4>No Fast Forward</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout master
~$ git merge feature --no-ff
        </code></pre>

        <h5>Why?</h5>

        <p class='fragment'>
            Because you lose branch/merge history with fast-forward!
        </p>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Divergent Changes</h4>

        <p>When code in <code>feature</code> diverges from the current trunk...</p>

        <img class='fragment' style='margin-right: 3.9em; width:40%;' src='images/git_merge-2.png' alt='git branch diagram with divergent changes'>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git checkout master
~$ git merge feature
        </code></pre>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Divergent Changes</h4>

        <p>When code in <code>feature</code> diverges from the current trunk...</p>

        <img src='images/git_merge-3.png' alt='git merge diagram with merge commit' style='width:60%;'>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout master
~$ git merge feature
        </code></pre>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Divergent Changes</h4>

        <p>When code in <code>feature</code> diverges from the current trunk...</p>

        <img style='margin:1.25em 0;' src='images/git_merge-4.png' alt='git merge diagram with merged branch'>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout master
~$ git merge feature
        </code></pre>
    </section>

    <section>
        <h3>Merge Conflicts</h3>
    </section>

    <section>
        <h4>Conflicts</h4>

        <p>When git can't determine how to handle multiple changes...</p>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout master
~$ git merge feature
Auto-merging README.md
<strong>CONFLICT (content): Merge conflict in README.md</strong>
Automatic merge failed; fix conflicts and then commit the result.
        </code></pre>
    </section>

    <section>
        <h4>Conflicts</h4>

        <p>Inside the <code>README.md</code> file...</p>

        <pre><code class='no-highlight' data-trim data-noescape>
...some text common to both branches

&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
text only in master
=======
same line, different text in branch
&gt;&gt;&gt;&gt;&gt;&gt;&gt; feature

more common text...
        </code></pre>
    </section>

    <section>
        <h4>Resolving the Conflict</h4>

        <ol>
            <li>Fix the conflict in the file!</li>
            <li class='fragment'>
                Stage the fixed file<br>
                <code>~$ git add README.md</code>
            </li>
            <li class='fragment'>
                Commit the files<br>
                <span class='fine'>(This is your merge commit, it may include other files!)</span><br>
                <code>~$ git commit</code>
            </li>
            <li class='fragment'>
                Remove the "orig"inal file from the branch <span class='fine'>(if present)</span><br>
                <code>~$ rm README.md.orig</code>
            </li>
        </ol>
    </section>

    <section>
        <h3>Rebasing</h3>

        <p class='fragment illuminate'>BE CAREFUL rebasing if you have<br>already pushed to a shared branch!</p>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Divergent Changes</h4>

        <img style='margin: 0.1em 4.8em 0 0; width:40%;' src='images/git_rebase_1.png' alt='git rebase diagram with divergent changes'>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Rewriting History</h4>

        <img style='margin:0.4em 0; width: 60%;' src='images/git_rebase_2.png' alt='git rebase diagram with rewritten branch commits'>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout feature
~$ git rebase master
        </code></pre>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Rebasing on Master</h4>

        <img style='margin:1em 0; width: 60%;' src='images/git_rebase_3.png' alt='git rebase diagram with rewritten commits on master'>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout feature
~$ git rebase master
        </code></pre>
    </section>

    <section>
        <h4>You can still get conflicts with <code>rebase</code>!</h4>
    </section>

    <section>
        <h4>Rebase Conflicts</h4>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git rebase master

First, rewinding head to replay your work on top of it...
Applying: feature
<strong>error: patch failed: README.md:1
error: README.md: patch does not apply</strong>
Using index info to reconstruct a base tree...
Falling back to patching base and 3-way merge...
Auto-merging README.md
<strong>CONFLICT (content): Merge conflict in README.md</strong>
Failed to merge in the changes.
        </code></pre>
    </section>

    <section>
        <h4>Resolving the Conflict</h4>

        <ol>
            <li>Fix the conflict in the file!</li>
            <li class='fragment'>
                Stage the fixed file<br>
                <code>~$ git add README.md</code>
            </li>
            <li class='fragment'>
                Continue the rebase<br>
                <code>~$ git rebase --continue</code>
            </li>
        </ol>
    </section>

    <section>
        <h4>Too Much Confliction?</h4>

        <div class='fragment'>
            <p>
                You can abort the entire process...
            </p>

            <pre><code class='no-highlight' data-trim data-noescape>
~$ git rebase --abort
            </code></pre>
        </div>
    </section>

    <section>
        <p class='illuminate'>I don't always rebase, but when I do... I do it by default.</p>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git pull --rebase
        </code></pre>

        <pre class='fragment'><code class='no-highlight' data-trim data-noescape>
~$ git config branch.master.rebase true
~$ git config branch.some-other-branch.rebase true
~$
~$ git config branch.autosetuprebase always
        </code></pre>

    </section>

    <section>
        <h3>Cherry-picking</h3>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Multiple Branches</h4>

        <img style='margin-right: 2.85em; width: 47%;' src='images/git_cherry-pick_1.png' alt='git multiple branch diagram'>

        <pre style='opacity:0'><code class='no-highlight' data-trim data-noescape>
{{just spacing}}
{{just spacing}}
        </code></pre>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Cherry Pick</h4>

        <img style='margin:0.5em 0; width: 60%;' src='images/git_cherry-pick_2.png' alt='git cherry-pick diagram'>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout new-feature
~$ git cherry-pick d42c386
        </code></pre>
    </section>

    <section data-transition='none' data-background='#fff'>
        <h4>Cherry Pick</h4>

        <img style='width: 60%;' src='images/git_cherry-pick_3.png' alt='git branch deletion after cherry-pick diagram'>

        <pre><code class='no-highlight' data-trim data-noescape>
~$ git checkout new-feature
~$ git branch -D old-feature
        </code></pre>

        <p class='fine' style='font-size: 0.7em;'>
            (Usually you don't want to cherry-pick<br>if you plan to use the source branch later!)
        </p>
    </section>

</section>


<section>
    <h2>Thank You!</h2>
    <h3 style='margin-top:1.5em;'>Gitting More Out of Git</h3>
    <p style='margin-top: 2em'>Jordan Kasper | <a href='http://twitter.com/jakerella'>@jakerella</a></p>

    <p>
      jordankasper.com/git
    </p>
    <p contenteditable>
      rate-link
    </p>
</section>
